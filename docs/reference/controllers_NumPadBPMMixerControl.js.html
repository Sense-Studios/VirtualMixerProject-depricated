<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: controllers/NumPadBPMMixerControl.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: controllers/NumPadBPMMixerControl.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>NumpadBpmMixerControl.prototype = new Controller(); // assign prototype to marqer
NumpadBpmMixerControl.constructor = NumpadBpmMixerControl;  // re-assign constructor

/**
* @description
*  Test en demo controller NumpadBpmMixerControl
* @implements Controller
* @constructor Controller#NumpadBpmMixerControl
* @example var numpad = new NumpadBpmMixerControl( renderer, mixer1, bpm );
* @param {GlRenderer} renderer - GlRenderer object
* @param {Module#Mixer} mixer - a Mixer instance
* @param {Addon#BPM} bpm - a BPM instance
*/

function NumpadBpmMixerControl( renderer, _mixer, _bpm ) {

  var _self = this

  // exposed variables.
  _self.uuid = "NumpadBpmMixer_" + (((1+Math.random())*0x100000000)|0).toString(16).substring(1);
  _self.type = "Control"
  _self.controllers = {};

  var _bpms = []
  var _mixers = []

  // counter
  var c = 0

  // add to renderer
  renderer.add(_self)

  // init with a tap contoller
  _self.init = function() {
    window.addEventListener( 'keydown', keyDownHandler )
    window.addEventListener( 'keyup', keyUpHandler )
  }

  _self.update = function() {}
  _self.render = function() {}

  // ---------------------------------------------------------------------------
  // Helpers

  _self.addMixer = function( _mixer ) {
    _mixers.push( _mixer )

  }

  _self.addBpm = function( _bpm ) {
    _bpms.push( _bpm )
  }

  // --------------------------------------------------------------------------
  var blendmodes = [ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18 ];
  var mixmodes = [ 1, 2, 3, 4, 5, 6, 7, 8, 9 ];
  var _to;

  //$('body').click( function() { _bpms.forEach( function( b ) { b.tap() } ) } );
  document.body.addEventListener('click', function() { _bpms.forEach( function( b ) { b.tap() } ) } );

  var keyDownHandler = function( _event ) {
    // should be some way to check focus of this BPM instance
    // if _self.hasFocus

    // 36 / 103, 38 / 104, 33 / 105, 107

    // 37 / 103, 38 / 101, 39 / 102

    // 35 /  97, 40 /  98, 33 / 105,  13

    // 45 /  96,         , 46 / 110

    console.log("had key: ", _event.which)

    var keybindings = [

      // BPM
      //[ 219, function() { _bpms.forEach( function( b ) { b.bpm -= 1   } ); } ], // [[]
      //[ 221, function() { _bpms.forEach( function( b ) { b.bpm += 1   } ); } ],  // ]
      [ 109, function() { _bpms.forEach( function( b ) { b.bpm -= 1   } ); } ], //  numpad -
      [ 107, function() { _bpms.forEach( function( b ) { b.bpm += 1   } ); } ],  // numpad +

      [ 106, function() { _bpms.forEach( function( b ) { b.bpm *= 2   } ); } ],  // numpad *
      [ 111, function() { _bpms.forEach( function( b ) { b.bpm *= 0.5 } ); } ],  // numpad /

      [ 101, function() { _bpms.forEach( function( b ) { b.tap()      } ); }  ],  // numpad 5

      // hackity
      [  96, function() { switcher1.doSwitch(0) } ],  // 0
      [ 110, function() { switcher1.doSwitch(1) } ],  // .
      [  75, function() { switcher1.doSwitch(0) } ],  // k
      [  76, function() { switcher1.doSwitch(1) } ],  // l
      [  66, function() { _bpms.forEach( function( b ) { b.tap()      } ); }  ],  // b
      [  32, function() { _bpms.forEach( function( b ) { b.tap()      } ); }  ],  // [space]

      // hack
      //[  219, function() { clearTimeout(_to); _to = setTimeout( function() { filemanager1.change() } , 200 ) } ], // [
      [  81, function() { clearTimeout(_to); _to = setTimeout( function() { giphymanager1.change() } , 200 ) } ], // q
      //[  87, function() { clearTimeout(_to); _to = setTimeout( function() { giphymanager1.change() } , 200 ) } ], // w

      [  87, function() { clearTimeout(_to); _to = setTimeout( function() { filemanager2.change("awesome") } , 200 ) } ], // w
      [  69, function() { clearTimeout(_to); _to = setTimeout( function() { filemanager3.change("runner") } , 200 ) } ], // e
      [  82, function() { clearTimeout(_to); _to = setTimeout( function() { filemanager4.change() } , 200 ) } ], // r

      [  65, function() { giphymanager1.source.currentFrame( Math.floor( Math.random() * giphymanager1.source.duration() ) ) } ], // a
      [  83, function() { filemanager2.source.currentTime( Math.floor( Math.random() * filemanager2.source.duration() ) ) } ], // b
      [  68, function() { filemanager3.source.currentTime( Math.floor( Math.random() * filemanager3.source.duration() ) ) } ], // c

      [  188, function() { mixer3.pod( mixer3.pod() - 0.1 ) } ], // ,
      [  190, function() { mixer3.pod( mixer3.pod() + 0.1 ) } ], // .
      //[  190, function() { mixer3.pod( mixer3.pod() + 0.1 ) } ], // .


      // MIXER
      // [ 219, function() { return i -= 1 } ], // 4
      // [ 221, function() { return i += 1 } ]  // 6

      // reset
      [ 104, function() { _mixers.forEach( function(m) { m.blendMode(1); m.mixMode(1); blendmodes = [ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18 ]; mixmodes = [ 1, 2, 3, 4, 5, 6, 7, 8, 9 ] }) }],  // 8

      [ 103, function() { blendmodes.unshift( blendmodes.pop() ); _mixers.forEach( function(m) { m.blendMode(blendmodes[0]); } ) } ],  // 7
      [ 105, function() { blendmodes.push( blendmodes.shift());   _mixers.forEach( function(m) { m.blendMode(blendmodes[0]); } ) } ],  // 9
      [ 100, function() { mixmodes.unshift( mixmodes.pop() );     _mixers.forEach( function(m) { m.mixMode(mixmodes[0]);     } ) } ],  // 4
      [ 102, function() { mixmodes.push( mixmodes.shift());       _mixers.forEach( function(m) { m.mixMode(mixmodes[0]);     } ) } ],  // 6

      [ 97, function() { console.log("mix trans left, down") } ],  // 6
      //[ 95, function() { transmodes.unshift( transmodes.pop() ); mixmode = transmodes[0]; } ],  // 6
      [ 99, function() { console.log("mmix trans right, down") } ]  // 6

    ]

    keybindings.forEach( function( bind ) {
      if ( bind[0] == _event.which ) {
        bind[1]();
        //console.log("numpad Handled key", bind[0], _bpm.bpm,  _mixer.mixMode(),  _mixer.blendMode() )
        console.log("numpad Handled key DOWN", bind[0], _bpm.bpm,  _mixer.mixMode(),  _mixer.blendMode() )
      }
    })
  }

  var keyUpHandler = function( _event ) {
    var keybindings = [
      [ 97, function() { console.log("mix trans left, up") } ],  // 6
      //[ 95, function() { transmodes.unshift( transmodes.pop() ); mixmode = transmodes[0]; } ],  // 6
      [ 99, function() { console.log("mmix trans right, up") } ]  // 6
    ]

    keybindings.forEach( function( bind ) {
      if ( bind[0] == _event.which ) {
        bind[1]();
        console.log("numpad Handled key UP", bind[0], _bpm.bpm,  _mixer.mixMode(),  _mixer.blendMode() )
      }
    })
  }

}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Addon_BPM.html">BPM</a></li><li><a href="Addon_Gyphymanager.html">Gyphymanager</a></li><li><a href="Controller_Midi_MidiController.html">MidiController</a></li><li><a href="Controller_NumpadBpmMixerControl.html">NumpadBpmMixerControl</a></li><li><a href="GlRenderer.html">GlRenderer</a></li><li><a href="Module_Chain.html">Chain</a></li><li><a href="Module_Mixer.html">Mixer</a></li><li><a href="Module_Output.html">Output</a></li><li><a href="Module_Switcher.html">Switcher</a></li><li><a href="Source_GifSource.html">GifSource</a></li><li><a href="Source_SolidSource.html">SolidSource</a></li><li><a href="Source_VideoSource.html">VideoSource</a></li></ul><h3>Interfaces</h3><ul><li><a href="Addon.html">Addon</a></li><li><a href="Controller.html">Controller</a></li><li><a href="Controller_Midi.html">Midi</a></li><li><a href="Module.html">Module</a></li><li><a href="Source.html">Source</a></li><li><a href="Yes,.html">Yes,</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Tue Oct 02 2018 16:08:16 GMT+0200 (CEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
