var express = require('express');
var router = express.Router();

router.setIo = function(_io ) {
  router.io = _io
}

var myObj = {"foo":"bar"}

var sheets = [
  [
    [ [ ".....", ".....", 8], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],

    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],

    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],

    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],

    // ----------------------------

    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],

    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],

    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],

    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],

    // ----------------------------

    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],

    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],

    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],

    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],

    // ----------------------------

    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],

    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],

    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],

    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
  ],
  [
    [ [ ".....", ".....", 8], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],

    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],

    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],

    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],

    // ----------------------------

    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],

    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],

    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],

    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ],
    [ [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0], [ ".....", ".....", 0] ]
  ],


]

/*
app.post('/login',function(req,res){
  var user_name=req.body.user;
  var password=req.body.password;
  console.log("User name = "+user_name+", password is "+password);
  res.end("yes");
});
*/

/* Return data for io. */
router.post('/', function (req, res) {
  // uipdate sheetsres.send('POST request to the homepage')
  // something something res
  console.log("got post,", req.body.sheets)
  console.log("got post,", req.body.sheetindex)

  sheets = JSON.parse( req.body.sheets )
  res.send(sheets[ req.body.sheetindex ])

  //sheets = req.body.sheets
  router.io.emit('command', {'command': 'updatesheets', "payload": req.body })
})

router.get('/', function(req, res, next) {

  //  console.log(msg)
    //$('#messages').append($('<li>').text(msg));
  router.io.emit('command', 'ping')
  console.log('this is io')
  //console.log( express )



  res.send(sheets)
  /*
  res.render( 'io', {
    title: 'IO EXPRESS'
    //giphy_key: process.env.GIPHYKEY,
    //marduq_key: process.env.MARDUQKEY
  });
  */
});


module.exports = router;
